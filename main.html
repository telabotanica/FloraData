<!DOCTYPE html>
<html>
	<head>
		<meta http-equiv="content-type" content="text/html; charset=UTF-8"/>
		<meta http-equiv="content-style-type" content="text/css" />
		<meta http-equiv="content-script-type" content="text/javascript" />
		<meta http-equiv="content-language" content="fr" />
		<meta http-equiv="cache-control" content="no-cache">
		
		<!-- Viewport -->
		<meta name="apple-mobile-web-app-capable" content="yes" />
		<meta name="apple-mobile-web-app-status-bar-style" content="black" />
		<meta name="viewport" content="width=device-width, user-scalable=no, minimum-scale=1.0, maximum-scale=1.0"/>
		
		<title>Carnet en ligne mobile</title> 
		
		<!-- CSS -->
		<link href="css/bootstrap.min.css" rel="stylesheet" type="text/css"/>
		<link href="less/app.less" rel="stylesheet/less" type="text/css" />
			
		<!-- Javascript -->
		<script type="text/javascript" src="js/jquery-2.0.2.min.js"></script>
		<!-- Jquery UI : nécessaire pour l'auto-complétion -->
		<script type="text/javascript" src="js/jquery-ui-1.8.18.custom.min.js"></script>
		<!-- Javascript : appli saisie -->
		<script type="text/javascript">
		//<![CDATA[
		var DEBUG = false;
		var HTML5 = false;
			// Mot-clé du widget/projet
			var TAG_PROJET = "WidgetSaisie";
			// Mots-clés à ajouter aux images
			var TAG_IMG = "";
			// Mots-clés à ajouter aux observations
			var TAG_OBS = "";
			// URL du web service réalisant l'insertion des données dans la base du CEL.
			var SERVICE_SAISIE_URL = "http://www.tela-botanica.org/eflore/cel/jrest/CelWidgetSaisie";
		var NOM_SCI_REFERENTIEL = "bdtfx:1.01";
		var NOM_SCI_PROJET = "bdtfx";
		var NOM_SCI_VERSION = "1.01";
			// Indication de la présence d'une espèce imposée
			var ESPECE_IMPOSEE = "";
			// Tableau d'informations sur l'espèce imposée
			var INFOS_ESPECE_IMPOSEE = Array;
			// Nombre d'élément dans les listes d'auto-complétion
			var AUTOCOMPLETION_ELEMENTS_NBRE = 20;
			// Indication de la présence d'un référentiel imposé
			var REFERENTIEL_IMPOSE = "";
			// Indication des version utilisées de chaque référentiel
			var PROJETS_VERSIONS = {"bdtfx":"1.01","bdtxa":"1.00","isfan":"1.00","_none":"0.00"};
			// Nombre d'observations max autorisé avant transmission
			var OBS_MAX_NBRE = 10;
			// Durée d'affichage en milliseconde des messages d'informations
			var DUREE_MESSAGE = 15000;
			// Squelette d'URL du web service d'eFlore fournissant les noms de communes.
			var SERVICE_NOM_COMMUNE_URL = "http://www.tela-botanica.org/service:eflore:0.1/osm/nom-commune?lon={lon}&lat={lat}";
		// Squelette d'URL du web service d'eFlore fournissant les noms de communes hors de France (localisation approximative).
		var SERVICE_NOM_COMMUNE_URL_ALT = "http://www.tela-botanica.org/service:eflore:0.1/wikipedia/nom-commune?lon={lon}&lat={lat}&nbre=1";
			// Texte en absence de connexion
			var TEXTE_HORS_LIGNE = 'Aucune connexion.';
			// Texte en absence de compte
			var TEXTE_NON_COMPTE = 'Aucun compte enregistré.';
			// Texte en presence de compte
			var TEXTE_OUI_COMPTE = 'Ajouter au compte ';
			
			var fileSystem,
				pictureSource,
				destinationType; // sets the format of returned value 
				
			var LIMITE_NBRE_PHOTOS = 3,
				LIMITE_NBRE_TRANSMISSION = 2;		
				
			document.addEventListener('deviceready', onDeviceReady, false);
			function onDeviceReady() {
				pictureSource = navigator.camera.PictureSourceType;
				destinationType = navigator.camera.DestinationType;
				window.requestFileSystem(LocalFileSystem.PERSISTENT, 0,
					function(object) {
						fileSystem = object;
					}, 
					function(error) {
						alert('Le système de fichiers est inaccessible.');
					}
				);
			}
		//]]>
		</script>
		<script type="text/javascript" src="js/defaut.js"></script>
		<script type="text/javascript" src="js/capture.js"></script>
		<script src="js/underscore-min.js" type="text/javascript" ></script>	
		<script src="js/backbone-min.js" type="text/javascript" ></script>	
		<script src="App.js" type="text/javascript" ></script>
		<script src="phonegap.js" type="text/javascript" ></script>
	</head>
	
	
	<body class="container"> 
		<div id="content"></div>
		
		
		<div>
			<div class="row-fluid text-center">
				<hr />
				<button type="button" onclick="capturePhoto();" class="btn btn-large btn-inverse">
					<i class="icon-picture icon-white"></i> <br />
					Ajouter une photo...
				</button>
			</div>

			<img id="myImage" src="" width="50%" style="display:none"/>
			<input type="button" onclick="deletePhoto();" value="Supprimer la photo" />
			
			<hr />
			<div class="row-fluid">
				<div class="span12 text-center">
					<button id="ajouter-obs" class="btn btn-warning btn-large" type="button">
						<i class="icon-ok"></i> <br />
						Enregistrer
					</button>
				</div>
			</div>
			<hr />
			
			
			<div id="liste-obs" ></div>
		</div>	
		

		<script type="text/javascript" src="js/less-1.3.3.min.js"></script>
		<script type="text/javascript" src="js/bootstrap.min.js"></script>
		
		
		<div id="sauvegarde-obs-modal" class="hide modal fade" tabindex="-1" role="dialog" aria-labelledby="sauvegarde-obs-modal-label" aria-hidden="true" data-backdrop="static">
			<div class="modal-header text-center">
				<h4 id="sauvegarde-obs-modal-label">Observation enregistrée ! <br /> Bravo !</h4>
			</div>
			<div class="modal-body">
				<button onclick="location.reload();" class="btn btn-primary btn-block fermer-obs-modal">
					Continuer les observations
				</button>
				<hr />
				<a href="#transmission" class="btn btn-warning btn-block fermer-obs-modal">
					Transmettre mes observations
				</a>
			</div>
			<div class="modal-footer"></div>
		</div>
		
		
		<div id="informations-modal" class="modal hide fade" tabindex="-1" role="dialog" aria-labelledby="informations-label" aria-hidden="true" data-backdrop="static">
			<div class="modal-header">
				<h4 id="informations-label">Informations</h4>
			</div>
			<div class="modal-body text-center">
				BlaBla. <br />
				Licence. <br />
				Tela-Botanica. <br />
				Développement. <br />
			</div>
			<div class="modal-footer">
				<button class="btn btn-inverse" data-dismiss="modal" > 
					Fermer
				</button>
			</div>
		</div>
	</body>
</html>
